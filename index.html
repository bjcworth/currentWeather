
<!DOCTYPE html>
<html lang="en">
<head>
	<title>Weather Page</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
	<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	<!--<script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>-->
<style>
body {
	background-color: #b0c4de;
}
.container {
	position: absolute;
	top:0;
	width: 100%;
	text-align: center;
}
.child {
	position: relative;
}
.container, #locSearch {
	margin-left: auto;
    margin-right: auto;
	padding: 10px;
    border: 5px;
    margin-top: 20px;
    margin-bottom: 20px;
    display: none;
}

#demo {
	display: none;
	text-transform: capitalize;
}



</style>

</head>

<body>
	<div class = "container">
		<h1>Enter location name or zip for current weather</h1>
		<div class="child">
			<form class="form-inline" id="locSearch" role="form" action="javascript:console.log('Form initialized!');">
				<div class="form-group">
					<label for="inputdefault" style="font-size:150%;">Location:</label>
					<input type="text" class="form-control" placeholder="(i.e. Boston, MA or 02215)" autofocus>
				</div>
				<input type="submit" class="btn btn-primary btn-md" value="Search">
			</form>
		</div>
		<div class="result">
			<h3 id="demo"> </h3>
		</div>
			<!-- <iframe
			  width="600"
			  height="450"
			  frameborder="0" style="border:0"
			  src="https://www.google.com/maps/embed/v1/place?key=API_KEY
			    &q=Space+Needle,Seattle+WA">
			</iframe> -->
	</div>

	

	

<script>
	
	$(document).ready(function () {
	   $('.container').fadeIn(1500);
	   $('#locSearch').delay(1000).slideDown("slow");
	});
	
	$('#locSearch').submit(function(event) {
		var div = document.getElementById('demo');
		$(div).empty();
		$(div).hide();
		var url = "http://api.openweathermap.org/data/2.5/weather?q=";
		var units = "&units=imperial";
		var formdata = document.getElementById('locSearch');
		var loc = "";
		var i;
		for (i=0; i<formdata.length; formdata++) {
			loc += formdata.elements[i].value;
		}
		//document.getElementById("demo").innerHTML = loc;
		loc = loc.charAt(0).toUpperCase() + loc.substr(1);
		url += loc + units;
		$.ajax({url: url,
			dataType: "jsonp",
			success: function(loc_parse){
				if (loc_parse['message']){
					var msg = loc_parse['message'];
					alert(msg);
					$('#locSearch')[0].reset();
				}
				else {

					var iconURL = "http://openweathermap.org/img/w/";
					var icon = loc_parse['weather'][0]['icon'];
					var city = loc_parse['name'];
					var country = loc_parse['sys']['country'];
					var temp = Math.round(loc_parse['main']['temp']);
					if (country=="United States of America") {
						country="US";
					}
					iconURL += icon +".png";
					var img = new Image();
					img.onload = function() {
						div.appendChild(img);
					};
					img.src = iconURL;
					var location;
					if(city) {
						location = city + ", " + country;
					}
					else if (loc == country) { location = country;}
					else if ((loc != country) && !city) { location = loc + ", " + country;}
					else { location = loc;}
					$(div).append(location + ": ");
					$(div).append(temp + "°");
					$(div).fadeIn(500);
					//alert("Current temperature in " + location + " is: " + temp + "°");
					$('.child').effect( "bounce", {distance: 10, times: 3 }, "slow" );
					$('#locSearch')[0].reset();
					
				}
			}
		});
	});
</script>
</body>
</html>
